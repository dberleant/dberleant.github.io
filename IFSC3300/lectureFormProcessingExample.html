<!DOCTYPE html>
<html>
<body onload="handleFormAction()"> <!- 1: replace this placeholder HTML comment with a real comment>

<p id="newtab"></p>
<h2>Form handling example in JavaScript</h2>
<h3>(Or, John Doe meets Robbie Robot)</h3>
<h4>Instructions: Fill in the form. Then fill in comments 1 through 23 in the JavaScript code!</h4>


<form  target="_blank" action="">  <!- 2: replace this placeholder HTML comment with a real comment>
Type your first name:
<br> <!- 3: replace this placeholder HTML comment with a real comment>
<input type="text" name="firstName" value="John"> <!- 4: replace this placeholder HTML comment with a real comment>
<br>
...and last name:
<br>
<input type="text" name="lastName" value="Doe">
<br>
<input type="submit" value="Click to submit form"> <!- 5: replace this placeholder HTML comment with a real comment>
</form>
<br><br>

<p id="demo"> <!- 6: replace this placeholder HTML comment with a real comment>
<b>The analysis of the form data will appear here:</b>
</p>

<script>
//7 
function handleFormAction(){
//8 
  if (document.URL.indexOf("?")>-1){
       document.getElementById("newtab").innerHTML="<H1>You are looking at a new browser tab, in which this page has been reloaded. The initial load of this page is still in its original tab.</h1>"
//9 
	   processFormData();
  }

}
//10 
function processFormData(){
  //11
  let fullURLstring=document.URL
  //12
  document.getElementById('demo').innerHTML
     +=  "<br>fullURLstring is: "+fullURLstring;
  //13
  let separate_argsPassedIn=fullURLstring.split("?");
  //14
  document.getElementById('demo').innerHTML
     += "<br>fullURLstring is: "+ separate_argsPassedIn;
  //15
  document.getElementById('demo').innerHTML
     += "<br>Notice '?' is removed and parts are now separated by a comma";
  //16
  let tempArray=['a','b','c','d','e'];
  //17
  document.getElementById('demo').innerHTML
     += "<br>array ['a','b','c','d','e'] prints out as: "
        + tempArray;
  //18
  document.getElementById('demo').innerHTML
     += "<br>That should remind you what .split() returns.";
  //19
  let argsPassedIn=separate_argsPassedIn[1];
  //20
  document.getElementById('demo').innerHTML
     += "<br>"+argsPassedIn;
  //21
  let arrayOfArgs=argsPassedIn.split("&");
  //22
  document.getElementById('demo').innerHTML
     += "<br>"+arrayOfArgs;
  //23
  let arg1=arrayOfArgs[0];
  //24
  let arg2=arrayOfArgs[1];
  //25
  document.getElementById('demo').innerHTML
     += "<br>"+arg1;
  //26
  document.getElementById('demo').innerHTML
     += "<br>"+arg2;
  //27
  let separate_firstName = arg1.split("=");
  //28
  let separate_lastName  = arg2.split("=");
  //29
  let firstName=separate_firstName[1];
  //30
  let lastName =separate_lastName [1];
  //31
  document.getElementById('demo').innerHTML
     += "<br>"+firstName;
  //32
  document.getElementById('demo').innerHTML
     += "<br>"+lastName;
  //33
  document.getElementById('demo').innerHTML
     += "<br>Good afternoon, "+lastName+". I am Robot, but please call me Robbie. May I call you "+firstName+"?";
}
</script>

</body>
</html>
